--example for plugging on multiple channels
-- **** Get all the types RIGHT

protocol IntTerm (A) => P =
              GetInt   :: Get (A|P) => P 
              PutInt   :: Put (A|P) => P
              Close    :: Top       => P  

coprotocol CP => Console (A) =
              GetIntC   :: CP => Get (A|CP)  
              PutIntC   :: CP => Put (A|CP) 
              CloseC    :: CP => Bot 


proc p1 :: Int | Console(Int) => Put (Int|Bot) = 
  st | console => ch1,ch2 -> do 
         hput GGetInt on console
         get x on console 
         put x on  ch1
         close ch1
         close ch2
         hput Close on console
         halt console
         
run console => intTerm1,intTerm2,intTerm3 -> 
    plug  
        p1 ( | console => ch1)
        p2 ( | ch1 => intTerm1,ch2)
        p3 ( | ch2 => ch3,inTerm2)
        p4 ( | ch3 => intTerm3)


